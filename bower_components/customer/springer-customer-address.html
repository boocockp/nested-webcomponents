<link rel="import" href="../polymer/polymer.html">

<dom-module id="springer-customer-address">
    <template>
        <h3>Address</h3>
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-2 control-label">Street</label>
                <div class="col-sm-10">
                    <p class="form-control-static">{{data.street}}</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">City</label>
                <div class="col-sm-10">
                    <p class="form-control-static">{{data.city}}</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Country</label>
                <div class="col-sm-10">
                    <p class="form-control-static">{{data.country}}</p>
                </div>
            </div>
        </form>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'springer-customer-address',
        properties: {
            data: {
                type: Object
            }
        },

        _findParentComponent: function (el, cls) {
            while ((el = el.parentElement) && !el.onDataChange);
            return el;
        },

        dataChanged: function(data) {
            console.log(this.localName + '#' + this.id + " data changed", data);
            this.data = data.address;
        },

        created: function() {
            console.log(this.localName + '#' + this.id + ' was created');
        },

        attached: function() {
            console.log(this.localName + '#' + this.id + ' was attached');
            this._findParentComponent(this).onDataChange(this.dataChanged.bind(this))
        },

        detached: function() {
            console.log(this.localName + '#' + this.id + ' was detached');
        },

        attributeChanged: function(name, type) {
            console.log(this.localName + '#' + this.id + ' attribute ' + name +
                    ' was changed to ' + this.getAttribute(name));
        }

    });
</script>
